<script>
// LPChart v1.0
// 2013-06-18

function LPChart(){function _(e){var t=function(e){var t=[];var n,r,i,s;e.each(function(e){e.forEach(function(e){e=e.map(function(t,n){return[x.call(e,t,n),T.call(e,t,n)]});t.push(e)});n=d3.min(t,function(e){return d3.min(e,function(e){return e[0]})});r=d3.max(t,function(e){return d3.max(e,function(e){return e[0]})});i=0;s=d3.max(t,function(e){return d3.max(e,function(e){return e[1]})})});return{datasets:t,minX:n,maxX:r,minY:i,maxY:s}};x=function(e){return O[p].tickParser(e[0])};T=function(e){return M[d].tickParser(e[1])};N=O[p].scale;C=M[d].scale;k=O[p].tickFormat;L=M[d].tickFormat;E.scale(N).tickFormat(k).ticks(c);S.scale(C).tickFormat(L).ticks(h);if(v!==null){E.tickValues(v.map(function(e){return O[p].tickParser(e)}))}else{E.tickValues(null)}if(m!==null){S.tickValues(m.map(function(e){return M[d].tickParser(e)}))}else{S.tickValues(null)}var _=t(e);var D=_.datasets,P=_.minX,H=_.maxX,B=_.minY,j=_.maxY;var F=[P,H];if(p=="string"){F=D[0].map(function(e){return e[0]})}if(u.toString().substr(-1)=="%"){u=e[0][0].offsetWidth*(u.substr(0,u.length-1)/100)}r=0;i=0;s=0;o=0;if(g){o=12+E.tickPadding();if(!b){o+=A}}else{if(y){o=5}}if(y){s=7;r=20}else{s=1}var I=this[0][0];var q=d3.select(I).selectAll("svg").data([D]);var R=q.enter().append("svg").append("g");var U=q.select("g");var z=0;var W=0;var X=0;l=a-s-o;f=u-r-i;N.domain(F);if(p=="string"){N.rangePoints([0,f])}else{N.range([0,f])}C.domain([0,j]).range([l,0]);if(g){R.append("g").attr("class","axis axis-x");U.select(".axis-x").attr("transform","translate(0,"+C.range()[0]+")").call(E);var V=d3.select(I).select(".axis-x").select(".tick");var $=V.node().getBBox().width;W=$/2;var J=d3.select(d3.select(I).select(".axis-x").selectAll(".tick")[0].pop());var K=J.node().getBBox().width;X=K/2;U.select(".axis-x").remove()}if(y){R.append("g").attr("class","axis axis-y");U.select(".axis-y").call(S);var Q=0;d3.select(I).select(".axis-y").selectAll("text").each(function(){if(this.getBBox().width>Q)Q=this.getBBox().width});z=Q+S.tickPadding();if(!w){z+=yAxisTickSize}U.select(".axis-y").remove()}r=d3.max([z,W]);i=X;f=u-r-i;if(b){E.tickSize(-l,0,0)}else{E.tickSize(A,0,0)}if(p=="string"){N.rangePoints([0,f])}else{N.range([0,f])}if(g){R.append("g").attr("class","axis axis-x");U.select(".axis-x").attr("transform","translate(0,"+C.range()[0]+")").call(E)}if(w){S.tickSize(-f,0,0)}else{S.tickSize(yAxisTickSize,0,0)}C.range([l,0]);if(y){R.append("g").attr("class","axis axis-y");U.select(".axis-y").call(S)}q.attr("width",u).attr("height",a);U.selectAll(".line").data(D).enter().append("path").attr("class",function(e,t){return"line line-"+(t+1)}).attr("d",n);U.attr("transform","translate("+r+","+s+")")}function D(e){return N(e[0])}function P(e){return C(e[1])}var e={date:d3.time.format("%Y-%m-%d").parse,hour:d3.time.format("%H:%M").parse,month:d3.time.format("%m").parse,numeric:function(e){return+e},string:function(e){return e},year:d3.time.format("%Y").parse,yearmonth:d3.time.format("%Y-%m").parse};var t={date:function(e){return d3.time.format("%e %b")(e)},hour:function(e){return d3.time.format("%H:%M")(e)},month:function(e){return d3.time.format("%b")(e)},numeric:function(e){return d3.format(",")(e)},string:function(e){return e},weekday:function(e){return d3.time.format("%a")(e)},year:function(e){return d3.time.format("%Y")(e)},yearmonth:function(e){return d3.time.format("%b %Y")(e)}};var n=d3.svg.line().x(D).y(P),r=0,i=0,s=0,o=0,u="100%",a=200,f=20,l=0,c=8,h=5,p="numeric",d="numeric",v=null,m=null,g=true,y=true,b=false,w=false,E=d3.svg.axis().orient("bottom"),S=d3.svg.axis().orient("left"),x=null,T=null,N=null,C=null,k=null,L=null,A=5;yAxisTickSize=5;var O={date:{scale:d3.time.scale(),tickFormat:t.date,tickParser:e.date},hour:{scale:d3.time.scale(),tickFormat:t.hour,tickParser:e.hour},month:{scale:d3.time.scale(),tickFormat:t.month,tickParser:e.month},numeric:{scale:d3.scale.linear(),tickFormat:t.numeric,tickParser:e.numeric},string:{scale:d3.scale.ordinal(),tickFormat:t.string,tickParser:e.string},weekday:{scale:d3.time.scale(),tickFormat:t.weekday,tickParser:e.date},year:{scale:d3.time.scale(),tickFormat:t.year,tickParser:e.year},yearmonth:{scale:d3.time.scale(),tickFormat:t.yearmonth,tickParser:e.yearmonth}};var M={numeric:{scale:d3.scale.linear(),tickFormat:t.numeric,tickParser:e.numeric}};_.xAxisType=function(e){if(!arguments.length)return p;if(e in O){p=e}return _};_.yAxisType=function(e){if(!arguments.length)return d;if(e in M){d=e}return _};_.width=function(e){if(!arguments.length)return u;u=e;return _};_.height=function(e){if(!arguments.length)return a;a=e;return _};_.xAxisTicks=function(e){if(!arguments.length)return c;c=e;return _};_.yAxisTicks=function(e){if(!arguments.length)return h;h=e;return _};_.showXAxis=function(e){if(!arguments.length)return g;g=e;return _};_.showYAxis=function(e){if(!arguments.length)return y;y=e;return _};_.showXAxisGrid=function(e){if(!arguments.length)return b;b=e;return _};_.showYAxisGrid=function(e){if(!arguments.length)return w;w=e;return _};_.xAxisTickValues=function(e){if(!arguments.length)return v;v=e;return _};_.yAxisTickValues=function(e){if(!arguments.length)return m;yTickValues=e;return _};_.x=function(e){if(!arguments.length)return x;x=e;return _};_.y=function(e){if(!arguments.length)return T;T=e;return _};return _}

</script>